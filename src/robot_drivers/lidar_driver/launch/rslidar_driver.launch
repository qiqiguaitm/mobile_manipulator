<launch>
  <!-- RSLidar SDK node for RS-Helios LiDAR -->
  <node pkg="rslidar_sdk" name="rslidar_sdk_node" type="rslidar_sdk_node" output="screen">
    <param name="config_path" value="$(find lidar_driver)/config/rslidar_config.yaml"/>
    <!-- Remap point cloud topic for compatibility with other nodes -->
    <remap from="/rslidar_points" to="/lidar/chassis/point_cloud"/>
    <remap from="/sensors/lidar/scan" to="/lidar/chassis/scan"/>
  </node>
    <!-- rviz -->
  <!-- <node pkg="rviz" name="rviz" type="rviz" args="-d $(find rslidar_sdk)/rviz/rviz.rviz" /> -->
  
  <!-- Pointcloud to laserscan conversion -->
  <node pkg="pointcloud_to_laserscan" type="pointcloud_to_laserscan_node" name="pointcloud_to_laserscan">
    <remap from="cloud_in" to="/lidar/chassis/point_cloud"/>
    <remap from="scan" to="/lidar/chassis/scan"/>
    <rosparam>
      target_frame: rslidar
      transform_tolerance: 0.01
      min_height: -0.1
      max_height: 0.1
      angle_min: -3.1415926 # -M_PI
      angle_max: 3.1415926 # M_PI
      angle_increment: 0.0087 # M_PI/360.0
      scan_time: 0.3333
      range_min: 0.3
      range_max: 200.0
      use_inf: true
      inf_epsilon: 1.0
      concurrency_level: 1
    </rosparam>
  </node>
</launch>