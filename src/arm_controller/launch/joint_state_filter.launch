<?xml version="1.0"?>
<launch>
  <!-- Joint State Filter - 解决时间戳警告问题 -->
  
  <!-- 参数配置 -->
  <arg name="min_time_gap" default="0.005" />  <!-- 最小时间间隔(秒) -->
  <arg name="enable_filter" default="true" />
  
  <group if="$(arg enable_filter)">
    <!-- 启动过滤器节点 -->
    <node name="joint_state_filter" pkg="arm_controller" type="_cc_fix_joint_state_timestamp.py" 
          output="screen" respawn="false">
      <param name="min_time_gap" value="$(arg min_time_gap)" />
      <param name="queue_size" value="1" />
      
      <!-- 重映射：让原始发布者发布到raw话题 -->
      <remap from="/joint_states" to="/joint_states_filtered" />
      <remap from="/joint_states_raw" to="/joint_states" />
    </node>
    
    <!-- 重新发布过滤后的消息到标准话题 -->
    <node name="joint_state_republisher" pkg="topic_tools" type="relay"
          args="/joint_states_filtered /joint_states" />
  </group>
  
</launch>